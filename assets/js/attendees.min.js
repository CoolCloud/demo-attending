(function(){var e=new Firebase("https://attendees.firebaseIO.com/people");var t='<div data-alert class="alert-box">{0}</div>';var a=false;$("button").on("click",function(){if(a)return false;a=true;$("button").text("Processing, please wait...");var t=$("#firstName").val();var l=$("#lastName").val();var n=$("#twitter").val();var i=false;var s=true;if(t.length===0)s=false;if(l.length===0)s=false;if(n.length===0)s=false;if(!s){r("Please complete all fields","alert");a=false;$("button").text("Confirm");return false}e.on("value",function(e){for(item in e.val()){if(e.val()[item].twitter===n)i=true}});if(!i){e.push({firstName:t,lastName:l,twitter:n});r("Success, your on the list","success")}else{r("Sorry a user with that Twitter name already exists!","alert");a=false;$("button").text("Confirm")}a=false;$("button").text("Confirm");return false});function r(e,a){$(".alert-box").remove();$("#frm").prepend(t.replace("{0}",e));$(".alert-box").addClass(a)}e.on("value",function(e){var t=0;e.forEach(function(){t++});$("#count").text(t)});e.on("child_changed",function(e){var t=0;e.forEach(function(){t++});$("#count").text(t)})})();